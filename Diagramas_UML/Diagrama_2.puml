@startuml
!theme plain
title Sistema de Seguimiento Ocular - Procesamiento y GrabaciÃ³n

start

:ğŸ¥ CÃ¡mara USB;
note right: Captura video\n640x480 @ 30fps\nConexiÃ³n USB estÃ¡ndar

:â¬‡ï¸ Preprocesamiento;
note right: Flip horizontal (espejo)\nConversiÃ³n BGR â†’ RGB\nRedimensionado frame

:ğŸ§  MediaPipe Face Mesh;
note right: DetecciÃ³n facial automÃ¡tica\n468 landmarks en tiempo real\nRefinamiento de puntos\nAnÃ¡lisis iris y cejas

:âš™ï¸ CÃ¡lculo de ParÃ¡metros;
note right: EAR (Eye Aspect Ratio)\nDirecciÃ³n de mirada\nAltura de cejas\nEstado ojos (parpadeo/guiÃ±o)

:ğŸ“Š AnÃ¡lisis Temporal;
note right: Suavizado de movimientos\nHistorial de gestos\nDetecciÃ³n de cambios\nValidaciÃ³n de datos

split
:ğŸ“º Ventana Principal\nMalla Facial;
note right: Video en tiempo real\nTeselaciÃ³n completa\nLandmarks superpuestos\nInformaciÃ³n parÃ¡metros
split again
:ğŸ–¥ï¸ Emulador Virtual\n3 Modos;
note right: Modo RectÃ¡ngulos\nModo Redondeados\nModo AM (Ondas)\nPanel de parÃ¡metros
split again
:ğŸ” Ventana Escaneo\nLandmarks;
note right: Fondo blanco\nSolo puntos faciales\nPatrÃ³n de polÃ­gonos\nCentros de ojos
end split

:ğŸ’¾ GrabaciÃ³n JSON;
note right: Captura 30 FPS\nMetadata temporal precisa\nEstados oculares\nPosiciones de mirada\nGuardado automÃ¡tico

:ğŸ“ Almacenamiento;
note right: Carpeta "Animaciones JSON"\nTimestamp automÃ¡tico\nFormato JSON optimizado\nListo para reproducciÃ³n

stop

@enduml
